<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>treedb by chfin</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">treedb</h1>
        <p class="header">A hierarchical key-value-database for common lisp</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/chfin/treedb/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/chfin/treedb/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/chfin/treedb">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/chfin">chfin</a></p>


      </header>
      <section>
        <h1>treedb</h1>

<p>treedb is a simple in-memory database for hierarchical keys.
This means, your keys are structured like a path in a file system or a system registry.</p>

<h2>Features</h2>

<ul>
<li>storing values in memory in a tree structure</li>
<li>tree inspection</li>
<li>alist and json export</li>
<li>implemented in alists</li>
</ul><h3>Planned features</h3>

<ul>
<li>persistence</li>
<li>restarts</li>
<li>other internal implementations</li>
<li>serialization</li>
<li>tree queries/manipulation</li>
</ul><h2>Installation</h2>

<p>treedb comes with an ASDF system, so it can be loaded via ASDF
or as a local project via quicklisp.</p>

<h2>Usage</h2>

<p>For detailed info see the <a href="treedb.html">documentation</a></p>

<p>treedb lives in the package <a href="treedb.html#reference-treedb"><code>treedb</code></a>.
Here are some examples:</p>

<div class="highlight"><pre><span class="c1">;;create a new instance</span>
<span class="p">(</span><span class="nb">defparameter</span> <span class="vg">*db*</span> <span class="p">(</span><span class="nv">treedb:make-alist-treedb</span><span class="p">))</span>

<span class="c1">;;set values:</span>
<span class="p">(</span><span class="nb">setf</span> <span class="p">(</span><span class="nv">treedb:node</span> <span class="vg">*db*</span> <span class="ss">:a</span> <span class="ss">:1</span><span class="p">)</span> <span class="s">"Hello"</span> <span class="c1">; /:a/:1 &lt;- "Hello"</span>
      <span class="p">(</span><span class="nv">treedb:node</span> <span class="vg">*db*</span> <span class="ss">:a</span> <span class="ss">:2</span><span class="p">)</span> <span class="ss">:world</span>  <span class="c1">; /:a/:2 &lt;- :world</span>
      <span class="p">(</span><span class="nv">treedb:node</span> <span class="vg">*db*</span> <span class="ss">:b</span><span class="p">)</span> <span class="mi">1</span>          <span class="c1">; /:b &lt;- 1</span>
      <span class="p">(</span><span class="nv">treedb:node</span> <span class="vg">*db*</span> <span class="ss">:c</span><span class="p">)</span> <span class="o">'</span><span class="p">((</span><span class="mi">1</span> <span class="o">.</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="mi">3</span> <span class="o">.</span> <span class="mi">4</span><span class="p">)))</span> <span class="c1">; /:c &lt;- '((1 . 2) (3 . 4))</span>

<span class="c1">;;get values</span>
<span class="p">(</span><span class="nv">treedb:node</span> <span class="vg">*db*</span> <span class="ss">:a</span> <span class="ss">:1</span><span class="p">)</span> <span class="c1">; =&gt; "Hello"</span>

<span class="c1">;;delete nodes</span>
<span class="p">(</span><span class="nv">treedb:del-node</span> <span class="vg">*db*</span> <span class="ss">:b</span><span class="p">)</span>

<span class="c1">;;list keys</span>
<span class="p">(</span><span class="nv">treedb:children</span> <span class="vg">*db*</span><span class="p">)</span> <span class="c1">; =&gt; (:A :C)</span>
<span class="p">(</span><span class="nv">treedb:children</span> <span class="vg">*db*</span> <span class="ss">:a</span><span class="p">)</span> <span class="c1">; =&gt; (:|1| :|2|)</span>

<span class="c1">;;take a subtree</span>
<span class="p">(</span><span class="nv">treedb:subtree</span> <span class="vg">*db*</span> <span class="ss">:a</span><span class="p">)</span> <span class="c1">; =&gt; subtree from :a</span>

<span class="c1">;;convert to alists or json (via cl-json)</span>
<span class="p">(</span><span class="nv">treedb:to-alist</span> <span class="p">(</span><span class="nv">treedb:subtree</span> <span class="vg">*db*</span> <span class="ss">:a</span><span class="p">))</span>
  <span class="c1">; =&gt; ((:1 . "Hello") (:2 . :world))</span>
<span class="p">(</span><span class="nv">treedb:to-json</span> <span class="p">(</span><span class="nv">treedb:subtree</span> <span class="vg">*db*</span> <span class="ss">:a</span><span class="p">))</span>
  <span class="c1">; =&gt; "{\"2\":\"Hello\",\"2\":\"world\"}"</span>
</pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>